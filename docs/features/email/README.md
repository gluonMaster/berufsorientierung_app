# Email Module Documentation

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å email –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ MailChannels HTTP API.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–¥–∞:** `src/lib/server/email/`

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- **[README.md](./README.md)** - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è (–≤—ã –∑–¥–µ—Å—å)
- **[MAILCHANNELS.md](./MAILCHANNELS.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MailChannels, DNS (SPF/DKIM/DMARC), troubleshooting
- **[DEVIATIONS.md](./DEVIATIONS.md)** - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∏—Ö –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ
- **[CHANGELOG.md](./CHANGELOG.md)** - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥—É–ª—è
- **[TEMPLATES.md](./TEMPLATES.md)** - Email —à–∞–±–ª–æ–Ω—ã (Welcome, Event Registration, etc.) _(–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø–æ–∑–∂–µ)_

---

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### `sendEmail(to, subject, text, env)`

–û—Ç–ø—Ä–∞–≤–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ email.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `to` (string) - Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `subject` (string) - –¢–µ–º–∞ –ø–∏—Å—å–º–∞
- `text` (string) - –¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ (plain text)
- `env` (App.Platform['env']) - Environment variables (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)

**‚ö†Ô∏è –ü–æ—á–µ–º—É env - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä?**

–í Cloudflare Workers –Ω–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ `process.env`. Environment variables –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `platform.env` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–ø—Ä–æ—Å–∞. –Ø–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ `env` –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é:

- ‚úÖ **–ß–∏—Å—Ç–æ–π** - –Ω–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ–π** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å mock env –≤ unit-—Ç–µ—Å—Ç–∞—Ö
- ‚úÖ **–ü–æ—Ä—Ç–∏—Ä—É–µ–º–æ–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º Workers –æ–∫—Ä—É–∂–µ–Ω–∏–∏

–≠—Ç–æ **best practice** –¥–ª—è Cloudflare Workers –∏ SvelteKit on Cloudflare.

**–ü—Ä–∏–º–µ—Ä:**

```typescript
import { sendEmail } from '$lib/server/email';

// –í API route
export async function POST({ platform }: RequestEvent) {
	await sendEmail(
		'user@example.com',
		'Welcome to Berufsorientierung',
		'Thank you for registering!',
		platform!.env
	);

	return json({ success: true });
}
```

---

### `sendBulkEmails(recipients, subject, text, env)`

–ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å –±–∞—Ç—á–∏–Ω–≥–æ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `recipients` (string[]) - –ú–∞—Å—Å–∏–≤ email –∞–¥—Ä–µ—Å–æ–≤
- `subject` (string) - –¢–µ–º–∞ –ø–∏—Å—å–º–∞
- `text` (string) - –¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞
- `env` (App.Platform['env']) - Environment variables (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```typescript
{
	success: number;  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
	failed: number;   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö
	errors: string[]; // –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—è–º–∏
}
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–∫–ª—é—á–∞—è –º–∞—Å—Å–∏–≤ `errors`, —á—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–∞. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –ª—É—á—à–µ–π –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

**–ü—Ä–∏–º–µ—Ä:**

```typescript
import { sendBulkEmails } from '$lib/server/email';

// –í API route
export async function POST({ platform }: RequestEvent) {
	const result = await sendBulkEmails(
		['user1@example.com', 'user2@example.com', 'user3@example.com'],
		'Newsletter',
		'Hello everyone!',
		platform!.env
	);

	console.log(`Sent: ${result.success}, Failed: ${result.failed}`);

	if (result.errors.length > 0) {
		console.error('Errors:', result.errors);
	}

	return json({
		success: result.failed === 0,
		stats: result,
	});
}
```

---

## Environment Variables

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**

```bash
EMAIL_PROVIDER=mailchannels
EMAIL_FROM=Berufsorientierung <Berufsorientierung@kolibri-dresden.de>
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è –±–∞—Ç—á–∏–Ω–≥–∞):**

```bash
EMAIL_BULK_CHUNK=50            # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
EMAIL_BULK_PAUSE_MS=60000      # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60000 = 1 –º–∏–Ω)
EMAIL_REPLY_TO=                # Reply-To –∞–¥—Ä–µ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

**üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (50 –ø–∏—Å–µ–º —Å –ø–∞—É–∑–æ–π 1 –º–∏–Ω—É—Ç–∞) –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ blacklist. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–∏.

**DKIM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

```bash
DKIM_DOMAIN=kolibri-dresden.de
DKIM_SELECTOR=mailchannels
DKIM_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
```

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. DKIM –ü–æ–¥–ø–∏—Å—å

–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `DKIM_DOMAIN`, `DKIM_SELECTOR` –∏ `DKIM_PRIVATE_KEY`, –ø–∏—Å—å–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è DKIM.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è deliverability
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø—É—Ñ–∏–Ω–≥–∞
- ‚úÖ –õ—É—á—à–∏–π reputation –¥–æ–º–µ–Ω–∞

### 2. –ë–∞—Ç—á–∏–Ω–≥ –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫

–ü—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å—å–º–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –±–∞—Ç—á–∏ (—á–∞–Ω–∫–∏) –¥–ª—è:

- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ API
- –°–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É
- –ò–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∑–∞ spam

**–ê–ª–≥–æ—Ä–∏—Ç–º:**

1. –†–∞–∑–±–∏—Ç—å –º–∞—Å—Å–∏–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –Ω–∞ —á–∞–Ω–∫–∏ –ø–æ `EMAIL_BULK_CHUNK` (default: 50)
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –ø–∏—Å—å–º–∞ –≤ —á–∞–Ω–∫–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (`Promise.all`)
3. –°–¥–µ–ª–∞—Ç—å –ø–∞—É–∑—É `EMAIL_BULK_PAUSE_MS` (default: 60000ms = 1 –º–∏–Ω) –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —á–∞–Ω–∫–æ–º
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤
5. –í–µ—Ä–Ω—É—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (success/failed/errors)

**–ü—Ä–∏–º–µ—Ä –±–∞—Ç—á–∏–Ω–≥–∞:**

```
500 –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π ‚Üí 10 –±–∞—Ç—á–µ–π –ø–æ 50 –ø–∏—Å–µ–º ‚Üí –ü–∞—É–∑–∞ 1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
–û–±—â–µ–µ –≤—Ä–µ–º—è: ~10 –º–∏–Ω—É—Ç (–¥–ª—è 500 –∞–¥—Ä–µ—Å–æ–≤)
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ **–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç** –æ—Å–Ω–æ–≤–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- `sendBulkEmails` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É—Å–ø–µ—Ö–æ–≤/–Ω–µ—É–¥–∞—á

---

## –¢–∏–ø—ã email –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. **Welcome Email** - –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Event Registration Confirmation** - –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
3. **Event Cancellation by User** - –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
4. **Event Cancelled by Admin** - –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
5. **Bulk Newsletter** - –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

_(–®–∞–±–ª–æ–Ω—ã –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–æ–º–ø—Ç–µ)_

---

## Quick Start

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [MAILCHANNELS.md](./MAILCHANNELS.md) –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SPF, DKIM, DMARC.

### 2. –î–æ–±–∞–≤—å—Ç–µ Environment Variables

```bash
# –í .env –∏–ª–∏ —á–µ—Ä–µ–∑ Cloudflare Dashboard
EMAIL_FROM=Berufsorientierung <Berufsorientierung@kolibri-dresden.de>
DKIM_DOMAIN=kolibri-dresden.de
DKIM_SELECTOR=mailchannels

# –î–æ–±–∞–≤—å—Ç–µ DKIM_PRIVATE_KEY —á–µ—Ä–µ–∑ wrangler secrets
wrangler secret put DKIM_PRIVATE_KEY
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–¥–µ

```typescript
import { sendEmail } from '$lib/server/email';

export async function POST({ request, platform }: RequestEvent) {
	// ... –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ ...

	await sendEmail(
		user.email,
		'Welcome!',
		'Thank you for joining Berufsorientierung!',
		platform!.env
	);

	return json({ success: true });
}
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ DO

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cloudflare Secrets –¥–ª—è `DKIM_PRIVATE_KEY`
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ email –∞–¥—Ä–µ—Å–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–ª—è –∞—É–¥–∏—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ rate limiting –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫

### ‚ùå DON'T

- –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ Git
- –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–∏—Å—å–º–∞ –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤
- –ù–ï –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ –ª–∏–º–∏—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ä–∏—Å–∫ blacklist)
- –ù–ï —Ö—Ä–∞–Ω–∏—Ç–µ DKIM –∫–ª—é—á–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ Cloudflare Workers

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
wrangler tail

# –§–∏–ª—å—Ç—Ä –ø–æ email –ª–æ–≥–∞–º
wrangler tail | grep "\[Email\]"
```

### Application Logs

–í—Å–µ email –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```
[Email] Successfully sent to: user@example.com
[Email Bulk] Starting bulk send: { totalRecipients: 150 }
[Email Bulk] Processing chunk 1/2 (100 emails)
[Email Bulk] Chunk 1/2 completed: { success: 98, failed: 2 }
[Email Bulk] Pausing for 1500ms before next chunk...
[Email Bulk] Bulk send completed: { total: 150, success: 148, failed: 2 }
```

---

## Troubleshooting

### –ü–∏—Å—å–º–∞ –Ω–µ –¥–æ—Ö–æ–¥—è—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É Spam
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS –∑–∞–ø–∏—Å–∏: https://mxtoolbox.com/
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Workers: `wrangler tail`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mail-tester.com –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### DKIM –ø—Ä–æ–±–ª–µ–º—ã

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ DNS –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ selector —Å–æ–≤–ø–∞–¥–∞–µ—Ç (`mailchannels`)
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 24-48 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è DNS

### MailChannels –æ—à–∏–±–∫–∏

- **401 Unauthorized** - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ –∏–∑ Cloudflare Workers environment
- **400 Bad Request** - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç payload
- **429 Rate Limit** - –£–º–µ–Ω—å—à–∏—Ç–µ `EMAIL_BULK_CHUNK` –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ `EMAIL_BULK_PAUSE_MS`

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [MAILCHANNELS.md](./MAILCHANNELS.md)

---

## Changelog

**2025-10-24:**

- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å email (`src/lib/server/email/index.ts`)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ MailChannels HTTP API
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ DKIM –ø–æ–¥–ø–∏—Å–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞—Ç—á–∏–Ω–≥ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ DNS
